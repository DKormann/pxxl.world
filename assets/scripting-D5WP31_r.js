var f=Object.defineProperty;var h=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var o=(t,e,r)=>h(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();class n{constructor(e,r){o(this,"value");o(this,"subscribers",new Set);if(this.key=e,this.defaultvalue=r,localStorage.getItem(e)===null)this.value=r;else try{this.value=JSON.parse(localStorage.getItem(e))}catch{this.value=r}}set(e){this.value=e,localStorage.setItem(this.key,JSON.stringify(e)),this.subscribers.forEach(r=>r(e))}subscribe(e){e(this.value),this.subscribers.add(e)}}const a=new Map;async function p(t){let e="";return t==="custom"?m.value:a.has(t)?a.get(t):(e=await fetch(`/userscripts/${t}.js`).then(r=>r.text()),a.set(t,e),e)}const d=new n("last_character","snake"),u=new n("active_script","");u.value===""&&p(d.value).then(t=>u.set(t));const m=new n("custom_script","");export{n as W,u as a,d as b,m as c,p as l};
